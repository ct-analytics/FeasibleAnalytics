---
title: "Package of the Month: dygraphs"
author: "Christopher Teixeira"
date: 2015-10-08
categories: []
tags: ["R", "Data Visualization"]
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/dygraphs/dygraph.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dygraphs/dygraph-combined.js"></script>
<script src="/rmarkdown-libs/dygraphs/shapes.js"></script>
<script src="/rmarkdown-libs/moment/moment.js"></script>
<script src="/rmarkdown-libs/moment-timezone/moment-timezone-with-data.js"></script>
<script src="/rmarkdown-libs/moment-fquarter/moment-fquarter.min.js"></script>
<script src="/rmarkdown-libs/dygraphs-binding/dygraphs.js"></script>


<p>This post will give you some code snippets for using the dygraphs javascript package through R. This package is great for visualizing and interacting with time series data.</p>
<p>First, let’s get some data and load the package. Being a big Red Sox fan, let’s grab David Ortiz’s home run totals for each season in his career out of the Lahman package. In order to use the dygraphs package, we need our data to be an XTS object. We’ll order the home run totals by year and then create the xts object to show yearly totals.</p>
<p>At last, we can draw out a baseline graph to start out with.</p>
<pre class="r"><code>suppressPackageStartupMessages(suppressWarnings(library(xts)))
suppressPackageStartupMessages(suppressWarnings(library(Lahman)))
suppressPackageStartupMessages(suppressWarnings(library(dygraphs)))
suppressPackageStartupMessages(suppressWarnings(library(dplyr)))
suppressPackageStartupMessages(suppressWarnings(library(lubridate)))

# Get David Ortiz&#39;s ID
data(&quot;Master&quot;)
david.ortiz &lt;- Master %&gt;% filter(nameFirst==&quot;David&quot;,nameLast==&quot;Ortiz&quot;) %&gt;% select(playerID) %&gt;% as.character

# Get his hitting data
do &lt;- Batting %&gt;%
  filter(playerID==david.ortiz) %&gt;%
  arrange(yearID) 

do.xts &lt;- xts(x=do$HR,order.by=ymd(paste(do$yearID,&quot;11&quot;,&quot;01&quot;,sep=&quot;-&quot;)))

# Create the plot
dygraph(do.xts)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"attrs":{"labels":["year","V1"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]]},"evals":[],"jsHooks":[]}</script>
<p>Well that was pretty easy. It automatically puts the interactive capabilities. Let’s start to clean it up a bit though by adjusting the series label and removing the vertical lines.</p>
<pre class="r"><code># Add in a time selector
dygraph(do.xts) %&gt;% dyRangeSelector()</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"attrs":{"labels":["year","V1"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}},"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel"},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]]},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<pre class="r"><code># Adjust the label
dygraph(do.xts) %&gt;% 
  dyRangeSelector() %&gt;% 
  dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) </code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"attrs":{"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}},"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","series":{"David Ortiz":{"axis":"y"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]]},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<pre class="r"><code># Remove verticle lines
dygraph(do.xts) %&gt;% 
  dyRangeSelector() %&gt;% 
  dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE)</code></pre>
<div id="htmlwidget-4" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel"},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]]},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<p>Now let’s fill in the area under the line, add markers to each point, and label the Y axis.</p>
<pre class="r"><code># Fill in the graph
dygraph(do.xts) %&gt;% dyRangeSelector() %&gt;% dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4)</code></pre>
<div id="htmlwidget-5" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<pre class="r"><code># Add markers
dygraph(do.xts) %&gt;% dyRangeSelector() %&gt;% dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4,drawPoints = TRUE, pointSize = 2)</code></pre>
<div id="htmlwidget-6" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":true,"pointSize":2,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<pre class="r"><code># Add in Y axis label
dygraph(do.xts) %&gt;% 
  dyRangeSelector() %&gt;% 
  dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyAxis(&quot;y&quot;, label=&quot;Homeruns&quot;) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4,drawPoints = TRUE, pointSize = 2)</code></pre>
<div id="htmlwidget-7" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-7">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","ylabel":"Homeruns","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":true,"pointSize":2,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<p>Let’s start to explain some of the events in David’s career. We can add a vertical line for the date he signed with the Red Sox and being the biased fan, let’s zoom in on years he played with the Red Sox. Finally, let’s mark each point for years he participated in the MLB All Star game.</p>
<pre class="r"><code># Add in event for traded
dygraph(do.xts) %&gt;% 
  dyRangeSelector() %&gt;% 
  dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyAxis(&quot;y&quot;, label=&quot;Homeruns&quot;) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4,drawPoints = TRUE, pointSize = 2) %&gt;%
  dyEvent(x = &quot;2003-01-22&quot;, &quot;Signed with the Red Sox&quot;, labelLoc = &quot;top&quot;)</code></pre>
<div id="htmlwidget-8" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-8">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","ylabel":"Homeruns","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":true,"pointSize":2,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"yearly","annotations":[],"shadings":[],"events":[{"pos":"2003-01-22T00:00:00.000Z","label":"Signed with the Red Sox","labelLoc":"top","color":"black","strokePattern":[7,3],"axis":"x"}],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<pre class="r"><code># Preselect only years he played for the redsox
dygraph(do.xts) %&gt;% 
  dyRangeSelector(dateWindow = c(&quot;2003-01-23&quot;, &quot;2014-11-01&quot;)) %&gt;% 
  dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyAxis(&quot;y&quot;, label=&quot;Homeruns&quot;) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4,drawPoints = TRUE, pointSize = 2) %&gt;%
  dyEvent(x = &quot;2003-01-22&quot;, &quot;Signed with the Red Sox&quot;, labelLoc = &quot;top&quot;)</code></pre>
<div id="htmlwidget-9" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-9">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"dateWindow":["2003-01-23T00:00:00.000Z","2014-11-01T00:00:00.000Z"],"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","ylabel":"Homeruns","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":true,"pointSize":2,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"yearly","annotations":[],"shadings":[],"events":[{"pos":"2003-01-22T00:00:00.000Z","label":"Signed with the Red Sox","labelLoc":"top","color":"black","strokePattern":[7,3],"axis":"x"}],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<pre class="r"><code>#A nnotate on all star game appearances
dygraph(do.xts) %&gt;% 
  dyRangeSelector(dateWindow = c(&quot;2003-01-23&quot;, &quot;2014-11-01&quot;)) %&gt;% 
  dySeries(&quot;V1&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyAxis(&quot;y&quot;, label=&quot;Homeruns&quot;) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4,drawPoints = TRUE, pointSize = 2) %&gt;%
  dyAnnotation(&quot;2004-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2005-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2006-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2007-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2008-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2010-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2011-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2012-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyAnnotation(&quot;2013-11-01&quot;, text=&quot;AS&quot;, tooltip=&quot;All Star Game Appearance&quot;) %&gt;%
  dyEvent(x = &quot;2003-01-22&quot;, &quot;Signed with the Red Sox&quot;, labelLoc = &quot;top&quot;)</code></pre>
<div id="htmlwidget-10" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-10">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"}},"labels":["year","David Ortiz"],"legend":"auto","retainDateWindow":false,"showRangeSelector":true,"dateWindow":["2003-01-23T00:00:00.000Z","2014-11-01T00:00:00.000Z"],"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","ylabel":"Homeruns","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":true,"pointSize":2,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"yearly","annotations":[{"x":"2004-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2005-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2006-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2007-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2008-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2010-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2011-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2012-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"},{"x":"2013-11-01T00:00:00.000Z","shortText":"AS","text":"All Star Game Appearance","attachAtBottom":false,"series":"David Ortiz"}],"shadings":[],"events":[{"pos":"2003-01-22T00:00:00.000Z","label":"Signed with the Red Sox","labelLoc":"top","color":"black","strokePattern":[7,3],"axis":"x"}],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<p>Finally, let’s add in a second player, Albert Pujols.</p>
<pre class="r"><code>#Let&#39;s add in another player
albert.pujols &lt;- Master %&gt;% filter(nameFirst==&quot;Albert&quot;,nameLast==&quot;Pujols&quot;) %&gt;% select(playerID) %&gt;% as.character
ap &lt;- Batting %&gt;%
  filter(playerID==albert.pujols) %&gt;%
  arrange(yearID) 
ap.xts &lt;- xts(x=ap$HR,order.by=ymd(paste(ap$yearID,&quot;11&quot;,&quot;01&quot;,sep=&quot;-&quot;)))

dygraph(cbind(do.xts,ap.xts)) %&gt;% 
  dyRangeSelector() %&gt;% 
  dySeries(&quot;do.xts&quot;, label = &quot;David Ortiz&quot;) %&gt;%
  dySeries(&quot;ap.xts&quot;, label = &quot;Albert Pujols&quot;) %&gt;%
  dyAxis(&quot;x&quot;, drawGrid = FALSE) %&gt;%
  dyAxis(&quot;y&quot;, label=&quot;Homeruns&quot;) %&gt;%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4,drawPoints = TRUE, pointSize = 2) %&gt;%
  dyLegend(labelsSeparateLines = T)</code></pre>
<div id="htmlwidget-11" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-11">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawGrid":false,"drawAxis":true},"y":{"drawAxis":true}},"series":{"David Ortiz":{"axis":"y"},"Albert Pujols":{"axis":"y"}},"labels":["year","David Ortiz","Albert Pujols"],"retainDateWindow":false,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","ylabel":"Homeruns","stackedGraph":false,"fillGraph":true,"fillAlpha":0.4,"stepPlot":false,"drawPoints":true,"pointSize":2,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false,"legend":"auto","labelsDivWidth":250,"labelsShowZeroValues":true,"labelsSeparateLines":true,"hideOverlayOnMouseOut":true},"scale":"yearly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1997-11-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2016-11-01T00:00:00.000Z","2017-11-01T00:00:00.000Z","2018-11-01T00:00:00.000Z"],[1,9,0,10,18,20,31,41,47,54,35,23,28,32,29,23,30,35,37,38,null,null],[null,null,null,null,37,34,43,46,41,49,32,37,47,42,37,30,17,28,40,31,23,19]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
